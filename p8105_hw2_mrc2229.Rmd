---
title: "p8105_hw2_mrc2229"
author: "Matthew Curran"
date: "10/1/2019"
output: github_document
---

```{r setup, include = FALSE}
library(tidyverse)
library (readxl)
```
#Problem 1
##Reading and cleaning the Mr. Trashwheel Sheet
```{r}
trashwheel_data = read_excel(
  "./hw2_data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", 
  sheet = 1, 
  range = "A2:N406",
  ) %>%
  janitor::clean_names() %>%
  drop_na(dumpster) %>%
  mutate(sports_balls = as.integer(sports_balls))
```
##Read and clean the 2017 and 2018 Precipitation Data
```{r}
precip_2017_data = read_excel(
  "./hw2_data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", 
  sheet = 6,
  skip = 1,
  range = "A2:B14") %>%
  janitor::clean_names() %>%
  rename (precip_inches=total) %>%
  mutate(year=2017)

precip_2018_data = read_excel(
  "./hw2_data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", 
  sheet = 5,
  skip = 1,
  range = "A2:B14") %>%
  janitor::clean_names() %>%
  rename (precip_inches=total) %>%
  mutate(year=2018)
```
##Combine the two Precipitaion Data Sets
```{r}
precip_data =
  bind_rows(precip_2017_data, precip_2018_data)%>%
  janitor::clean_names() %>%
  transform(month=month.name[month])
```

There are `r nrow (trashwheel_data)` observations in the trashwheel data set and `r ncol (trashwheel_data)` variables. Some of the key variables include weight_tons, which is the amount of trash collected that month in tons, and volume_cubic_yards, which gives the volume of the trash. We also can see things like the about of sports balls Mr. Trash wheel collected in a month or over a period of time. For example, Mr. Trashwheel collected a median of `r trashwheel_data %>% filter (year=="2017") %>% pull(sports_balls) %>% median()` sports balls in 2017.

There are `r nrow (precip_data)` observations in the trashwheel data set and `r ncol (precip_data)` variables. This data set contains the amount of precipitation in inches for every month of 2017 and 2018. So we can use it to show things like the total precipitation in 2018, which is `r precip_data %>% filter (year=="2018") %>% pull(precip_inches) %>% sum()` inches.

#Problem 2
##Reading and cleaning the FiveThirtyEight data.
```{r}
pols_month_data = read_csv ("./hw2_data/fivethirtyeight_datasets/pols-month.csv") %>%
  janitor::clean_names() %>%
  separate(col = mon, into = c("year","month","day")) %>%
  mutate(month=as.numeric(month)) %>%
  transform(month=month.name[month]) %>%
  mutate(president = recode(prez_gop, `1` = "gop", `0` = "dem")) %>%
  select (-prez_gop, -prez_dem, -day)

snp_data = read_csv(
  "./hw2_data/fivethirtyeight_datasets/snp.csv"
  ) %>%
  janitor::clean_names() %>%
  separate(col = date, into = c("month","day", "year")) %>%
  mutate(month=as.numeric(month)) %>%
  arrange (year, month) %>%
  transform(month=month.name[month]) %>%
  select (year, month, day, close)

unemployment_data = read_csv(
  "./hw2_data/fivethirtyeight_datasets/unemployment.csv"
  ) %>%
  janitor::clean_names() %>%
  pivot_longer(
    jan:dec,
    names_to = "month",
    values_to = "unemployment_rate"
    ) %>%
  transform(month=month.name[month])

snp_pol_data = 
  left_join(pols_month_data, snp_data, by = c("year","month"))

```
## Will use part of this, need to change to numeric dates in unemployment, but have to save for class.

fivethirtyeight_data = 
  left_join(snp_pol_data, unemployment_data, by = "year")

